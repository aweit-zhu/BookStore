<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>購物車</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link href="./output.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js"></script>
    <script src="/src/components/BookComponent.js"></script>
</head>

<body class="overflow-auto" style="min-width: 600px;">
    <!-- Header -->
    <div id="header" class="sticky top-0 bg-white z-50"></div>

    <section class="section h-60 w-2/3 mt-10">
        <div class="flex min-w-11 mx-auto  relative justify-between items-center">
            <p class="rounded-full border-2 px-3 py-1 text-nowrap text-lg font-bold bg-green-300">1</p>
            <hr class="border-2 border-green-600 w-full"/>
            <p class="rounded-full border-2 px-3 py-1 text-nowrap text-lg font-bold">2</p>
            <hr class="border-2 border-green-600 w-full"/>
            <p class="rounded-full border-2 px-3 py-1 text-nowrap text-lg font-bold">3</p>
            <p class="absolute left-1/4  -translate-x-1 transform top-0 text-sm">購物明細</p>
            <p class="absolute right-1/4 -translatex-1 transform top-0 text-sm">付款</p>
        </div>
        <table class="table-fixed mt-8 mx-auto text-center">
            <thead>
              <tr>
                <th class="pb-4">序號</th>
                <th class="pb-4">商品明細</th>
                <th class="pb-4">數量</th>
                <th class="pb-4">小計</th>
                <th class="pb-4">庫存</th>
                <th class="pb-4">變更明細</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="w-10">1</td>
                <td class="w-40">Java</td>
                <td class="w-20">1</td>
                <td class="w-20">400</td>
                <td class="w-20">20</td>
                <td class="w-30"><button class="btn-success">修改</button></td>
              </tr>
              <tr>
                <td colspan="6" class="text-end pt-8">
                    <button class="btn-primary">付款</button>
                </td>
              </tr>
            </tbody>
          </table>
    </section>

    <!-- 熱門搜尋 -->
    <div id="popular"></div>

    <!-- footer -->
    <div id="footer"></div>

    <script type="module">
        import { slide,currency } from '/src/js/util.js';

        $('#header').load('/src/fragements/header.html');
        $('#footer').load('/src/fragements/footer.html');
        $('#popular').load('/src/fragements/popularProduct.html',function(){
            
            var books = [
              new Book(1, "IT", "Java", 400),
              new Book(2, "IT", "Javascript", 400),
              new Book(3, "IT", "Spring", 700),
              new Book(4, "IT", "Python", 350),
              new Book(5, "IT", "SQL", 400),
              new Book(6, "Lang", "華語文", 600),
              new Book(7, "Lang", "英語", 800),
              new Book(8, "Lang", "法語", 800),
              new Book(9, "Lang", "多益檢定", 1700),
              new Book(10, "Lang", "全民英檢", 1500),
            ];

            let template = document.getElementById("book-component-template");
            books.map(book => {
                book.price = currency.format(book.price);
                const bookComponent = document.querySelector(`#book${book.id}`);
                if(bookComponent){
                    bookComponent.template = template;
                    bookComponent.book = book;
                }
          });
        });
    </script>
</body>

</html>